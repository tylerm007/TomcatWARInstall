<html>
	<head>
		<script type="text/javascript" src="js/jquery-1.8.3.js"></script>
	 	<script type="text/javascript" src="js/angular/angular-1.1.3.js"></script>
		<script type="text/javascript" src="js/angular/angular-resource.min.js"></script>
		<script type="text/javascript" src="js/util.js"></script>
		<script>
			$(function() {
				function handleFileSelect(evt) {
					
					if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {
						alert('Your browser does not support this feature.');
						return;
					}
					
					var files = evt.target.files; // FileList object
		
					// files is a FileList of File objects. List some properties.
					var output = '';
					for (var i = 0, f; f = files[i]; i++) {
						output += escape(f.name) + " - " + (f.type || 'n/a') + ' - ' + f.size + ' - ' + 
							(f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a');
					}
					$('#txt').html(output);
					
					var reader = new FileReader();
					reader.onload = function(e) {
						var bytes = new Uint8Array(e.target.result);
						var s = '';
						var i = 0;
						for (i = 0; i < bytes.length; i++)
							s += '' + bytes[i] + ',';
						console.log('Origina:' + s);
						var encoded = kahuna.util.base64_encode(bytes);
						console.log("Encoded:" + encoded);
						
						var decoded = kahuna.util.base64_decode(encoded);
						console.log("Decoded:" + decoded);
					};
					reader.readAsArrayBuffer(files[0]);
				}
				$('#fileSel').on('change', handleFileSelect);
			});
		</script>
	</head>
	<body>
		<textarea cols="80" rows="15" id="txt"></textarea>
		<input type="file" id="fileSel" name="selectedFile"/>Select a file
		<button onclick="selectFile()">Continue</button>
	</body>
</html>